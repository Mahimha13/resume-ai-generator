<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Resume & Cover Letter Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
      min-height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .container {
      background: #fff;
      max-width: 650px;
      width: 100%;
      margin: 40px 0;
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(60, 72, 100, 0.14);
      padding: 36px 28px 28px 28px;
      position: relative;
      overflow: hidden;
      animation: fadeIn 1s;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px);}
      to { opacity: 1; transform: translateY(0);}
    }
    h1 {
      text-align: center;
      color: #4f46e5;
      font-size: 2.1rem;
      margin-bottom: 18px;
      letter-spacing: 1px;
      font-weight: 800;
    }
    label {
      font-weight: 600;
      color: #374151;
      margin-top: 16px;
      display: block;
      margin-bottom: 6px;
      letter-spacing: 0.5px;
    }
    input[type="text"], input[type="email"], input[type="tel"], textarea, 
select {
      width: 100%;
      padding: 11px 10px;
      border-radius: 8px;
      border: 1.5px solid #c7d2fe;
      background: #f3f4f6;
      font-size: 1rem;
      margin-bottom: 10px;
      transition: border 0.2s;
      resize: vertical;
    }
    input:focus, textarea:focus, select:focus {
      border: 1.5px solid #6366f1;
      outline: none;
      background: #fff;
    }
    .section-title {
      font-size: 1.09rem;
      color: #6366f1;
      margin-top: 20px;
      margin-bottom: 2px;
      font-weight: 700;
      letter-spacing: 0.2px;
    }
    .inline-fields {
      display: flex;
      gap: 14px;
    }
    .inline-fields > div {
      flex: 1;
    }
    .add-btn {
      background: #e0e7ff;
      color: #4f46e5;
      border: none;
      border-radius: 6px;
      padding: 7px 16px;
      font-weight: 600;
      margin: 7px 0 13px 0;
      cursor: pointer;
      font-size: 0.98rem;
      transition: background 0.2s;
    }
    .add-btn:hover {
      background: #6366f1;
      color: #fff;
    }
    .dynamic-list {
      margin-bottom: 10px;
    }
    .dynamic-item {
      background: #f3f4f6;
      border-radius: 6px;
      padding: 7px 10px;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.98rem;
    }
    .remove-btn {
      background: none;
      border: none;
      color: #ef4444;
      font-size: 1.1rem;
      cursor: pointer;
      margin-left: 8px;
    }
    button[type="submit"] {
      display: block;
      width: 100%;
      margin-top: 20px;
      padding: 15px 0;
      background: linear-gradient(90deg, #6366f1 0%, #818cf8 100%);
      color: #fff;
      border: none;
      border-radius: 10px;
      font-size: 1.13rem;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 16px rgba(99, 102, 241, 0.13);
      transition: background 0.2s, transform 0.1s;
    }
    button[type="submit"]:disabled {
      background: #c7d2fe;
      color: #6b7280;
      cursor: not-allowed;
    }
    #output {
      margin-top: 32px;
      background: #f3f4f6;
      padding: 18px 16px;
      border-radius: 12px;
      min-height: 120px;
      white-space: pre-wrap;
      font-family: inherit;
      color: #374151;
      font-size: 1.04rem;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.07);
      animation: fadeIn 0.7s;
    }
    .footer {
      text-align: center;
      margin-top: 30px;
      color: #a5b4fc;
      font-size: 0.98rem;
      letter-spacing: 0.2px;
    }
    @media (max-width: 700px) {
      .container {
        padding: 18px 6vw 22px 6vw;
        max-width: 98vw;
      }
      h1 { font-size: 1.35rem; }
      .inline-fields { flex-direction: column; gap: 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Resume & Cover Letter Generator</h1>
    <form id="mainForm" autocomplete="off">
      <div class="section-title">Your Information</div>
      <label for="fullName">Full Name</label>
      <input type="text" id="fullName" placeholder="Enter your full name">

      <div class="inline-fields">
        <div>
          <label for="email">Email</label>
          <input type="email" id="email" 
placeholder="your.email@example.com">
        </div>
        <div>
          <label for="phone">Phone</label>
          <input type="tel" id="phone" placeholder="(555) 123-4567">
        </div>
      </div>
      <label for="address">Address</label>
      <input type="text" id="address" placeholder="City, State, ZIP">

      <label for="linkedin">LinkedIn (Optional)</label>
      <input type="text" id="linkedin" 
placeholder="https://linkedin.com/in/yourprofile">

      <div class="section-title">Professional Summary</div>
      <textarea id="summary" rows="2" placeholder="Brief overview of your 
professional background and goals..."></textarea>

      <div class="section-title">Skills <span 
style="color:#a5b4fc;font-weight:400;font-size:0.98rem;">(comma-separated)</span></div>
      <input type="text" id="skills" placeholder="JavaScript, Python, 
Project Management, Communication...">

      <div class="section-title">Work Experience</div>
      <div id="experienceList" class="dynamic-list"></div>
      <button type="button" class="add-btn" id="addExperienceBtn">+ Add 
Experience</button>

      <div class="section-title">Education</div>
      <div id="educationList" class="dynamic-list"></div>
      <button type="button" class="add-btn" id="addEducationBtn">+ Add 
Education</button>

      <div class="section-title">Target Job Information</div>
      <label for="jobTitle">Job Title</label>
      <input type="text" id="jobTitle" placeholder="Software Developer">

      <label for="companyName">Company Name</label>
      <input type="text" id="companyName" placeholder="ABC Company">

      <label for="jobDescription">Job Description/Requirements</label>
      <textarea id="jobDescription" rows="2" placeholder="Paste the job 
description here to customize your cover letter..."></textarea>

      <label for="type">What do you want to generate?</label>
      <select id="type">
        <option value="cover-letter">Cover Letter</option>
        <option value="resume">Resume</option>
        <option value="both">Resume & Cover Letter</option>
      </select>

      <button type="submit" id="generateBtn">Generate Resume & Cover 
Letter</button>
    </form>
    <div id="output"></div>
    <div class="footer">Made by Mahimha</div>
  </div>
  <script>
    // Dynamic Experience
    const experienceList = document.getElementById('experienceList');
    const addExperienceBtn = document.getElementById('addExperienceBtn');
    let experiences = [];

    function renderExperiences() {
      experienceList.innerHTML = '';
      experiences.forEach((exp, idx) => {
        const div = document.createElement('div');
        div.className = 'dynamic-item';
        div.innerHTML = `<span>${exp}</span>
          <button type="button" class="remove-btn" title="Remove 
Experience" onclick="removeExperience(${idx})">&times;</button>`;
        experienceList.appendChild(div);
      });
    }
    window.removeExperience = function(idx) {
      experiences.splice(idx, 1);
      renderExperiences();
    };
    addExperienceBtn.onclick = () => {
      const exp = prompt('Enter your work experience (e.g. "Frontend 
Developer at ABC Corp (2022-2024). Developed...")');
      if (exp && exp.trim()) {
        experiences.push(exp.trim());
        renderExperiences();
      }
    };

    // Dynamic Education
    const educationList = document.getElementById('educationList');
    const addEducationBtn = document.getElementById('addEducationBtn');
    let educations = [];

    function renderEducations() {
      educationList.innerHTML = '';
      educations.forEach((ed, idx) => {
        const div = document.createElement('div');
        div.className = 'dynamic-item';
        div.innerHTML = `<span>${ed}</span>
          <button type="button" class="remove-btn" title="Remove 
Education" onclick="removeEducation(${idx})">&times;</button>`;
        educationList.appendChild(div);
      });
    }
    window.removeEducation = function(idx) {
      educations.splice(idx, 1);
      renderEducations();
    };
    addEducationBtn.onclick = () => {
      const ed = prompt('Enter your education (e.g. "B.Sc. in Computer 
Science, XYZ University, 2022")');
      if (ed && ed.trim()) {
        educations.push(ed.trim());
        renderEducations();
      }
    };

    // Form Submission
    document.getElementById('mainForm').onsubmit = async function(e) {
      e.preventDefault();
      const outputDiv = document.getElementById('output');
      const generateBtn = document.getElementById('generateBtn');

      // Gather all fields
      const fullName = document.getElementById('fullName').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const address = document.getElementById('address').value.trim();
      const linkedin = document.getElementById('linkedin').value.trim();
      const summary = document.getElementById('summary').value.trim();
      const skills = document.getElementById('skills').value.trim();
      const jobTitle = document.getElementById('jobTitle').value.trim();
      const companyName = 
document.getElementById('companyName').value.trim();
      const jobDescription = 
document.getElementById('jobDescription').value.trim();
      const type = document.getElementById('type').value;

      // Build prompt
      let prompt = '';
      if (fullName) prompt += `Full Name: ${fullName}\n`;
      if (email) prompt += `Email: ${email}\n`;
      if (phone) prompt += `Phone: ${phone}\n`;
      if (address) prompt += `Address: ${address}\n`;
      if (linkedin) prompt += `LinkedIn: ${linkedin}\n`;
      if (summary) prompt += `Professional Summary: ${summary}\n`;
      if (skills) prompt += `Skills: ${skills}\n`;
      if (experiences.length) prompt += `Work 
Experience:\n${experiences.map((e,i)=>`${i+1}. ${e}`).join('\n')}\n`;
      if (educations.length) prompt += 
`Education:\n${educations.map((e,i)=>`${i+1}. ${e}`).join('\n')}\n`;
      if (jobTitle) prompt += `Target Job Title: ${jobTitle}\n`;
      if (companyName) prompt += `Target Company: ${companyName}\n`;
      if (jobDescription) prompt += `Job Description/Requirements: 
${jobDescription}\n`;

      if (!fullName || !email || !summary) {
        outputDiv.textContent = "Please fill in at least your name, email, 
and professional summary.";
        return;
      }

      generateBtn.disabled = true;
      outputDiv.textContent = 'Generating...';

      try {
        const response = await fetch('/generate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt, type })
        });

        if (!response.ok) throw new Error('Server error');

        const data = await response.json();
        outputDiv.textContent = data.result || 'No result returned.';
      } catch (error) {
        outputDiv.textContent = 'Error: ' + error.message;
      } finally {
        generateBtn.disabled = false;
      }
    };
  </script>
</body>
</html>

